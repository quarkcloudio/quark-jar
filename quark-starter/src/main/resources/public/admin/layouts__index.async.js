"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[717],{30614:function(we,Z,t){t.r(Z),t.d(Z,{default:function(){return Se}});var k=t(26068),A=t.n(k),b=t(15558),g=t.n(b),w=t(335),I=t.n(w),q=t(90228),C=t.n(q),_=t(87999),E=t.n(_),ee=t(48305),c=t.n(ee),v=t(75271),h=t(13955),te=t(44492),ne=t(28626),ae=t(25391),re=t(23972),se=t(16483),oe=t.n(se),qe=t(81414),ue=t(4612),le=t(51426),j=t(3159),ie=t(66949),x=t(59180),T=t(23871),fe=t(25616),de=t(21911),ve=1,ce=4;function he(U){return(0,de.Z)(U,ve|ce)}var pe=he,ge=t(83456),i=t(52676),ye=function(me){var O,Ce=(0,h.useModel)("pageLoading"),je=Ce.pageLoading,Le=(0,v.useState)({}),D=c()(Le,2),l=D[0],Me=D[1],Oe=(0,v.useState)({}),K=c()(Oe,2),z=K[0],R=K[1],Re=(0,h.useModel)("pageLoading"),L=Re.setPageLoading,Pe=(0,h.useModel)("@@initialState"),P=Pe.initialState,d=P==null?void 0:P.accountInfo,y=(0,h.useLocation)(),p=le.Z.parse(y.search),Fe=(0,v.useState)(""),G=c()(Fe,2),Ze=G[0],H=G[1],Ae=(0,v.useState)([]),N=c()(Ae,2),Ie=N[0],M=N[1],Ee=(0,v.useState)([""]),$=c()(Ee,2),B=$[0],F=$[1],xe=(0,v.useState)(!1),W=c()(xe,2),Te=W[0],Ue=W[1],De=(0,v.useState)([]),Y=c()(De,2),S=Y[0],Ke=Y[1],ze=(0,v.useState)([]),J=c()(ze,2),Ge=J[0],He=J[1];oe().locale("zh-cn");var Ne=function(){var r=E()(C()().mark(function a(){var e,n,s,f;return C()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,h.request)("./config.json");case 2:if(e=o.sent,n=e.api.layout,n){o.next=7;break}return R("The layout API cannot be null!"),o.abrupt("return");case 7:return L(!0),o.next=10,(0,T.U)({url:n});case 10:s=o.sent,Me(s),s.menu&&(Ke(Ve(s.menu)),He(ke(pe(s.menu)))),f=(0,x.Ah)(s.menu,y.pathname,decodeURIComponent(m)),H(f),L(!1);case 16:case"end":return o.stop()}},a)}));return function(){return r.apply(this,arguments)}}(),$e=function(){var r=E()(C()().mark(function a(){var e,n,s;return C()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(e=(0,x.Ah)(l.menu,y.pathname,decodeURIComponent(m)),H(e),m){u.next=5;break}return R(null),u.abrupt("return");case 5:return n={},Object.keys(p).forEach(function(o){o!=="api"&&(n[o]=p[o])}),L(!0),u.next=10,(0,T.U)({url:m,data:n});case 10:s=u.sent,R(s),L(!1);case 13:case"end":return u.stop()}},a)}));return function(){return r.apply(this,arguments)}}(),m="";p!=null&&p.api&&(m=p.api),(0,v.useEffect)(function(){Ne()},[]),(0,v.useEffect)(function(){$e()},[p.api]);var Be=function r(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l.menu,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],s=I()(e),f;try{for(s.s();!(f=s.n()).done;){var u=f.value,o=u.key;if(a===o)return M(g()(new Set(n))),n.push(o),F(g()(new Set(n))),u;if(u.routes&&u.routes.length>0){n.push(o);var V=r(a,u.routes,n);if(V)return M(g()(new Set(n))),F(g()(new Set(n))),V;n.pop()}}}catch(be){s.e(be)}finally{s.f()}},We=function r(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(a.type===2)return a;if(!(!a.routes||!a.routes.length)){var n=I()(a.routes),s;try{for(n.s();!(s=n.n()).done;){var f=s.value;if(f.type===2)return f;if(f.routes&&f.routes.length>0){e.push(f.key);var u=r(f.routes[0]);if(u)return M(e),u;e.pop()}}}catch(o){n.e(o)}finally{n.f()}}},Ye=function(a){var e=S.find(function(s){return s.key===a.key});if(e&&e.type!==3){if(e.type===1&&e.routes&&e.routes.length){var n=We(e);if(!n)return;F(g()(new Set([].concat(g()(B),[n.key])))),h.history.push(n.path)}else if(e.type===2){if(e.is_link===1||e.isLink===1)return window.open(e.path,"_blank"),!1;h.history.push(e.path)}}},Je=function(a){M(a)},Qe=l==null||(O=l.rightMenus)===null||O===void 0?void 0:O.map(function(r,a){return{key:a,label:(0,i.jsx)(j.Z,{body:r})}}),Xe=(0,ge.lr)(),Q=c()(Xe,2),X=Q[0],_e=Q[1];(0,v.useEffect)(function(){if(S&&S.length>0){var r=S.find(function(a){return a.path.startsWith(y.pathname+(X.get("api")?"?api="+X.get("api"):""))});if(!r)return;Be(r.key)}},[y,S]);var Ve=function r(a){return a.reduce(function(e,n){return e.push(n),n.routes&&n.routes.length>0&&(e=e.concat(r(n.routes))),e},[])},ke=function r(a){return a.filter(function(e){return e.routes&&e.routes.length&&(e.routes=r(e.routes)),e.show})};return(0,i.jsx)(te.ZP,{locale:re.Z,children:(0,i.jsxs)(ne.Z,{children:[(0,i.jsxs)(h.Helmet,{children:[(0,i.jsx)("meta",{charSet:"utf-8"}),(0,i.jsx)("title",{children:Ze})]}),(l==null?void 0:l.title)&&(0,i.jsx)(ue.f,A()(A()({},l),{},{loading:je,logo:l.logo?l.logo:ie,iconfontUrl:l.iconfontUrl,openKeys:Ie,selectedKeys:B,menuProps:{onOpenChange:Je,onClick:Ye},onCollapse:function(a){Ue(a)},menuDataRender:function(){return Ge},actionsRender:function(){return[(0,i.jsx)(j.Z,{body:l.actions},"action")]},avatarProps:{src:d!=null&&d.avatar?d==null?void 0:d.avatar:(0,i.jsx)(fe.Z,{}),size:"small",title:me.layout==="side"?Te||d==null?void 0:d.nickname:d==null?void 0:d.nickname,render:function(a,e){return(0,i.jsx)(ae.Z,{menu:{items:Qe},children:e})}},footerRender:function(){return(0,i.jsx)(j.Z,{body:l.footer})},children:z?(0,i.jsx)(j.Z,{body:z}):(0,i.jsx)(h.Outlet,{})}))]})})},Se=ye}}]);
