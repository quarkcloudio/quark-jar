"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[717],{52756:function($e,L,n){n.r(L);var J=n(97857),R=n.n(J),Q=n(19632),E=n.n(Q),X=n(96695),S=n.n(X),Y=n(15009),h=n.n(Y),w=n(99289),I=n.n(w),q=n(5574),m=n.n(q),f=n(67294),v=n(7837),V=n(94740),ee=n(3321),ne=n(85418),te=n(33852),Ge=n.n(te),_e=n(82925),ae=n(53032),re=n(94785),M=n(7058),se=n(66949),A=n(43083),T=n(91373),ue=n(87547),oe=n(11247),le=n(39711),l=n(85893),ie=function(de){var j,fe=(0,v.useModel)("pageLoading"),me=fe.pageLoading,ve=(0,f.useState)({}),b=m()(ve,2),o=b[0],ce=b[1],Ee=(0,f.useState)({}),K=m()(Ee,2),W=K[0],y=K[1],pe=(0,v.useModel)("pageLoading"),O=pe.setPageLoading,Pe=(0,v.useModel)("@@initialState"),C=Pe.initialState,d=C==null?void 0:C.accountInfo,p=(0,v.useLocation)(),c=re.Z.parse(p.search),ge=(0,f.useState)(""),B=m()(ge,2),he=B[0],z=B[1],Me=(0,f.useState)([]),k=m()(Me,2),Oe=k[0],D=k[1],De=(0,f.useState)([""]),Z=m()(De,2),F=Z[0],U=Z[1],je=(0,f.useState)(!1),x=m()(je,2),ye=x[0],Ce=x[1],Ue=(0,f.useState)([]),H=m()(Ue,2),P=H[0],Le=H[1],Re=(0,f.useState)([]),$=m()(Re,2),Se=$[0],Ie=$[1],Ae=function(){var a=I()(h()().mark(function _(){var e,t,r,i;return h()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,v.request)("./config.json");case 2:if(e=s.sent,t=e.api.layout,t){s.next=7;break}return y("The layout API cannot be null!"),s.abrupt("return");case 7:return O(!0),s.next=10,(0,T.U)({url:t});case 10:r=s.sent,ce(r),r.menu&&(Le(Fe(r.menu)),Ie(xe((0,oe.Z)(r.menu)))),i=(0,A.Ah)(r.menu,p.pathname,decodeURIComponent(g)),z(i),O(!1);case 16:case"end":return s.stop()}},_)}));return function(){return a.apply(this,arguments)}}(),Te=function(){var a=I()(h()().mark(function _(){var e,t,r;return h()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(e=(0,A.Ah)(o.menu,p.pathname,decodeURIComponent(g)),z(e),g){u.next=5;break}return y(null),u.abrupt("return");case 5:return t={},Object.keys(c).forEach(function(s){s!=="api"&&(t[s]=c[s])}),O(!0),u.next=10,(0,T.U)({url:g,data:t});case 10:r=u.sent,y(r),O(!1);case 13:case"end":return u.stop()}},_)}));return function(){return a.apply(this,arguments)}}(),g="";c!=null&&c.api&&(g=c.api),(0,f.useEffect)(function(){Ae()},[]),(0,f.useEffect)(function(){Te()},[c.api]);var be=function a(_){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o.menu,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=S()(e),i;try{for(r.s();!(i=r.n()).done;){var u=i.value,s=u.key;if(_===s)return D(E()(new Set(t))),t.push(s),U(E()(new Set(t))),u;if(u.routes&&u.routes.length>0){t.push(s);var N=a(_,u.routes,t);if(N)return D(E()(new Set(t))),U(E()(new Set(t))),N;t.pop()}}}catch(He){r.e(He)}finally{r.f()}},Ke=function a(_){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(_.type===2)return _;if(!(!_.routes||!_.routes.length)){var t=S()(_.routes),r;try{for(t.s();!(r=t.n()).done;){var i=r.value;if(i.type===2)return i;if(i.routes&&i.routes.length>0){e.push(i.key);var u=a(i.routes[0]);if(u)return D(e),u;e.pop()}}}catch(s){t.e(s)}finally{t.f()}}},We=function(_){var e=P.find(function(r){return r.key===_.key});if(e&&e.type!==3){if(e.type===1&&e.routes&&e.routes.length){var t=Ke(e);if(!t)return;U(E()(new Set([].concat(E()(F),[t.key])))),v.history.push(t.path)}else if(e.type===2){if(e.is_link===1)return window.open(e.path,"_blank"),!1;v.history.push(e.path)}}},Be=function(_){D(_)},ze=o==null||(j=o.rightMenus)===null||j===void 0?void 0:j.map(function(a,_){return{key:_,label:(0,l.jsx)(M.Z,{body:a})}}),ke=(0,le.lr)(),G=m()(ke,2),Ze=G[0],Je=G[1];(0,f.useEffect)(function(){if(P&&P.length>0){var a=P.find(function(_){return _.path.startsWith(p.pathname+"?api="+Ze.get("api"))});if(!a)return;be(a.key)}},[p,P]);var Fe=function a(_){return _.reduce(function(e,t){return e.push(t),t.routes&&t.routes.length>0&&(e=e.concat(a(t.routes))),e},[])},xe=function a(_){return _.filter(function(e){return e.routes&&e.routes.length&&(e.routes=a(e.routes)),e.show})};return(0,l.jsx)(V.ZP,{locale:_e.Z,children:(0,l.jsxs)(ee.Z,{children:[(0,l.jsxs)(v.Helmet,{children:[(0,l.jsx)("meta",{charSet:"utf-8"}),(0,l.jsx)("title",{children:he})]}),(o==null?void 0:o.title)&&(0,l.jsx)(ae.f,R()(R()({},o),{},{loading:me,logo:o.logo?o.logo:se,iconfontUrl:o.iconfontUrl,openKeys:Oe,selectedKeys:F,menuProps:{onOpenChange:Be,onClick:We},onCollapse:function(_){Ce(_)},menuDataRender:function(){return Se},actionsRender:function(){return[(0,l.jsx)(M.Z,{body:o.actions},"action")]},avatarProps:{src:d!=null&&d.avatar?d==null?void 0:d.avatar:(0,l.jsx)(ue.Z,{}),size:"small",title:de.layout==="side"?ye||d==null?void 0:d.nickname:d==null?void 0:d.nickname,render:function(_,e){return(0,l.jsx)(ne.Z,{menu:{items:ze},children:e})}},footerRender:function(){return(0,l.jsx)(M.Z,{body:o.footer})},children:W?(0,l.jsx)(M.Z,{body:W}):(0,l.jsx)(v.Outlet,{})}))]})})};L.default=ie}}]);
